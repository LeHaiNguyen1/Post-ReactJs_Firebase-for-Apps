{"ast":null,"code":"var _jsxFileName = \"/Users/lifetech/training-intern-032022/react-firestore/nguyenlehai/src/components/Articles.jsx\",\n    _s = $RefreshSig$();\n\nimport { collection, collectionGroup, onSnapshot, query } from \"firebase/firestore\";\nimport React, { useEffect, useState } from \"react\";\nimport { auth, db } from \"../firebaseConfig\";\nimport DeleteArticle from \"./DeleteArticle\";\nimport LikeArticle from \"./LikeArticle\";\nimport Comment from \"./Comment\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function Articles() {\n  _s();\n\n  const [articles, setArticles] = useState([]);\n  const [user, setUser] = useState('');\n  const [comment, setComment] = useState('');\n  const [comments, setComments] = useState(''); // Xử lý quá trình load user và bài post\n\n  useEffect(async () => {\n    auth.onAuthStateChanged(user => setUser(user.uid));\n    const articleRef = query(collectionGroup(db, \"userPost\"));\n    const unsub = onSnapshot(articleRef, async snapshot => {\n      const articles = snapshot.docs.map(doc => ({\n        uid: doc.ref.parent.parent.id,\n        id: doc.id,\n        ...doc.data()\n      }));\n      const arrPosts = await Promise.all(articles.map(async post => {\n        const uPost = { ...post,\n          name: (await db.doc(`users/${post.uid}`).get()).data().name\n        };\n        return uPost;\n      }));\n      setArticles(arrPosts); //console.log(arrPosts)\n    });\n    return unsub;\n  }, []);\n  console.log(\"check articlee\", articles); // xử lý quá trình show nội dung comment\n\n  useEffect(async () => {}); // xử lý nút button comment\n\n  const handleComment = idpost => {\n    console.log('chay comment bài post', idpost);\n    articles.map(async post => {\n      db.collection(\"comment\").doc(idpost).collection(\"postComment\").add({\n        comment: comments\n      });\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: articles.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"No articles found!\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 17\n    }, this) : articles.map(item => {\n      var _item$likes;\n\n      {\n        console.log('Check item', item);\n      }\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"border mt-3 p-3 bg-light\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-3\",\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: item.imageUrl,\n              alt: \"title\",\n              style: {\n                height: 180,\n                width: 200\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 78,\n              columnNumber: 37\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-9 ps-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"row\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col-6\",\n                children: item.name && /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"badge bg-primary\",\n                  children: item.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 88,\n                  columnNumber: 49\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 86,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col-6 d-flex flex-row-reverse\",\n                children: user && user.uid === item.userId && /*#__PURE__*/_jsxDEV(DeleteArticle, {\n                  id: item.id,\n                  imageUrl: item.imageUrl\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 93,\n                  columnNumber: 49\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 91,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 85,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n              children: item.title\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 97,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: item.createdAt.toDate().toDateString()\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 98,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n              children: item.description\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 99,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 100,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [\"Comment\", /*#__PURE__*/_jsxDEV(\"ul\", {\n                children: /*#__PURE__*/_jsxDEV(\"li\", {\n                  children: [item.name, \" : N\\u1ED9i dung comment\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 105,\n                  columnNumber: 45\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 104,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: user && /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: /*#__PURE__*/_jsxDEV(Comment, {\n                    idPost: item.id\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 110,\n                    columnNumber: 53\n                  }, this)\n                }, void 0, false)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 107,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 101,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"d-flex flex-row-reverse\",\n              children: [user && /*#__PURE__*/_jsxDEV(LikeArticle, {\n                id: item.id,\n                likes: item.likes\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 120,\n                columnNumber: 50\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"pe-2\",\n                children: /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: [(_item$likes = item.likes) === null || _item$likes === void 0 ? void 0 : _item$likes.length, \" likes\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 122,\n                  columnNumber: 45\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 121,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 119,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 29\n        }, this)\n      }, item.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 25\n      }, this);\n    } // ({\n    //      id,\n    //      title,\n    //      description,\n    //      imageUrl,\n    //      createdAt,\n    //      name,\n    //      userId,\n    //      likes,\n    //  }) => (\n    )\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 67,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Articles, \"43+hcCtZrt2QdLFk0zAuRSxIqXU=\");\n\n_c = Articles;\n\nvar _c;\n\n$RefreshReg$(_c, \"Articles\");","map":{"version":3,"sources":["/Users/lifetech/training-intern-032022/react-firestore/nguyenlehai/src/components/Articles.jsx"],"names":["collection","collectionGroup","onSnapshot","query","React","useEffect","useState","auth","db","DeleteArticle","LikeArticle","Comment","Articles","articles","setArticles","user","setUser","comment","setComment","comments","setComments","onAuthStateChanged","uid","articleRef","unsub","snapshot","docs","map","doc","ref","parent","id","data","arrPosts","Promise","all","post","uPost","name","get","console","log","handleComment","idpost","add","length","item","imageUrl","height","width","userId","title","createdAt","toDate","toDateString","description","likes"],"mappings":"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","sourcesContent":["import {collection, collectionGroup, onSnapshot, query} from \"firebase/firestore\";\nimport React, {useEffect, useState} from \"react\";\nimport {auth, db} from \"../firebaseConfig\";\nimport DeleteArticle from \"./DeleteArticle\";\nimport LikeArticle from \"./LikeArticle\";\nimport Comment from \"./Comment\";\n\n\nexport default function Articles() {\n    const [articles, setArticles] = useState([]);\n    const [user, setUser] = useState('');\n    const [comment, setComment] = useState('')\n    const [comments, setComments] = useState('')\n\n\n    // Xử lý quá trình load user và bài post\n    useEffect(async () => {\n        auth.onAuthStateChanged((user) => setUser(user.uid))\n        const articleRef = query(collectionGroup(db, \"userPost\"))\n        const unsub =onSnapshot(articleRef, async (snapshot) => {\n            const articles = snapshot.docs.map((doc) => ({\n                uid: doc.ref.parent.parent.id,\n                id: doc.id,\n                ...doc.data()\n            }));\n            const arrPosts = await Promise.all(\n                articles.map(async (post) => {\n                    const uPost = {\n                        ...post,\n                        name: (await db.doc(`users/${post.uid}`).get()).data().name\n                    }\n                    return uPost\n                })\n            )\n            setArticles(arrPosts);\n            //console.log(arrPosts)\n        });\n        return unsub\n    }, []);\n\n    console.log(\"check articlee\", articles)\n\n    // xử lý quá trình show nội dung comment\n\n\n    useEffect(async () => {\n\n\n    })\n\n\n// xử lý nút button comment\nconst handleComment = (idpost) =>{\n        console.log('chay comment bài post', idpost)\n    articles.map(async (post) =>{\n        db.collection(\"comment\").doc(idpost).collection(\"postComment\").add({\n            comment: comments\n        })\n\n    })\n}\n\n\n\n\n    return (\n        <div>\n            {articles.length === 0 ? (\n                <p>No articles found!</p>\n            ) : (\n                articles.map((item)=> {\n                        {console.log('Check item', item)}\n                    return (\n\n                        <div className=\"border mt-3 p-3 bg-light\" key={item.id}>\n                            <div className=\"row\">\n                                <div className=\"col-3\">\n                                    <img\n                                        src={item.imageUrl}\n                                        alt=\"title\"\n                                        style={{height: 180, width: 200}}\n                                    />\n                                </div>\n                                <div className=\"col-9 ps-3\">\n                                    <div className=\"row\">\n                                        <div className=\"col-6\">\n                                            {item.name && (\n                                                <span className=\"badge bg-primary\">{item.name}</span>\n                                            )}\n                                        </div>\n                                        <div className=\"col-6 d-flex flex-row-reverse\">\n                                            {user && user.uid === item.userId && (\n                                                <DeleteArticle id={item.id} imageUrl={item.imageUrl}/>\n                                            )}\n                                        </div>\n                                    </div>\n                                    <h3>{item.title}</h3>\n                                    <p>{item.createdAt.toDate().toDateString()}</p>\n                                    <h5>{item.description}</h5>\n                                    <hr/>\n                                    <div>\n                                        Comment\n\n                                        <ul>\n                                            <li>{item.name} : Nội dung comment</li>\n                                        </ul>\n                                        <div>\n                                            {user &&\n                                                <>\n                                                    <Comment idPost={item.id} />\n                                                </>\n\n                                            }\n\n                                        </div>\n\n\n                                    </div>\n                                    <div className=\"d-flex flex-row-reverse\">\n                                        {user && <LikeArticle id={item.id} likes={item.likes}/>}\n                                        <div className=\"pe-2\">\n                                            <p>{item.likes?.length} likes</p>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    )\n\n\n                }\n\n                    // ({\n                    //      id,\n                    //      title,\n                    //      description,\n                    //      imageUrl,\n                    //      createdAt,\n                    //      name,\n                    //      userId,\n                    //      likes,\n                    //  }) => (\n\n\n                )\n            )}\n        </div>\n    );\n}\n"]},"metadata":{},"sourceType":"module"}