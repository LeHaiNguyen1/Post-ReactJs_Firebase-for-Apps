{"ast":null,"code":"var _jsxFileName = \"/Users/lifetech/training-intern-032022/react-firestore/nguyenlehai/src/components/Articles.jsx\",\n    _s = $RefreshSig$();\n\nimport { collectionGroup, onSnapshot, query } from \"firebase/firestore\";\nimport React, { useEffect, useState } from \"react\";\nimport { auth, db } from \"../firebaseConfig\";\nimport DeleteArticle from \"./DeleteArticle\";\nimport LikeArticle from \"./LikeArticle\";\nimport Comment from \"./Comment\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Articles() {\n  _s();\n\n  const [articles, setArticles] = useState([]);\n  const [user, setUser] = useState(''); // Xử lý quá trình load user và bài post\n\n  useEffect(async () => {\n    auth.onAuthStateChanged(user => setUser(user.uid));\n    const articleRef = query(collectionGroup(db, \"userPost\"));\n    const unsub = onSnapshot(articleRef, async snapshot => {\n      const articles = snapshot.docs.map(doc => ({\n        uid: doc.ref.parent.parent.id,\n        id: doc.id,\n        ...doc.data()\n      }));\n      const arrPosts = await Promise.all(articles.map(async post => {\n        const uPost = { ...post,\n          name: (await db.doc(`users/${post.uid}`).get()).data().name\n        };\n        return uPost;\n      }));\n      setArticles(arrPosts);\n    });\n    return unsub;\n  }, []); // console.log(\"check articlee\", articles)\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: articles.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"No articles found!\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 17\n    }, this) : articles.map(item => {\n      var _item$likes;\n\n      {\n        console.log('Check item', item);\n      }\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"border mt-3 p-3 bg-light\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-3\",\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: item.imageUrl,\n              alt: \"title\",\n              style: {\n                height: 180,\n                width: 200\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 53,\n              columnNumber: 37\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 52,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-9 ps-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"row\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col-6\",\n                children: item.name && /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"badge bg-primary\",\n                  children: item.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 63,\n                  columnNumber: 49\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 61,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col-6 d-flex flex-row-reverse\",\n                children: user && user.uid === item.userId && /*#__PURE__*/_jsxDEV(DeleteArticle, {\n                  id: item.id,\n                  imageUrl: item.imageUrl\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 68,\n                  columnNumber: 49\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 66,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 60,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n              children: item.title\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 72,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: item.createdAt.toDate().toDateString()\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 73,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n              children: item.description\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 74,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 75,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [\"Comment\", /*#__PURE__*/_jsxDEV(\"div\", {\n                children: /*#__PURE__*/_jsxDEV(Comment, {\n                  idPost: item.id,\n                  user: user\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 79,\n                  columnNumber: 45\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 78,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 76,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"d-flex flex-row-reverse\",\n              children: [user && /*#__PURE__*/_jsxDEV(LikeArticle, {\n                id: item.id,\n                likes: item.likes\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 83,\n                columnNumber: 50\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"pe-2\",\n                children: /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: [(_item$likes = item.likes) === null || _item$likes === void 0 ? void 0 : _item$likes.length, \" likes\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 85,\n                  columnNumber: 45\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 84,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 82,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 59,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 29\n        }, this)\n      }, item.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 25\n      }, this);\n    })\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 40,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Articles, \"RLuWZrLITJnT73vzvxTaG1dO2qo=\");\n\n_c = Articles;\n\nvar _c;\n\n$RefreshReg$(_c, \"Articles\");","map":{"version":3,"sources":["/Users/lifetech/training-intern-032022/react-firestore/nguyenlehai/src/components/Articles.jsx"],"names":["collectionGroup","onSnapshot","query","React","useEffect","useState","auth","db","DeleteArticle","LikeArticle","Comment","Articles","articles","setArticles","user","setUser","onAuthStateChanged","uid","articleRef","unsub","snapshot","docs","map","doc","ref","parent","id","data","arrPosts","Promise","all","post","uPost","name","get","length","item","console","log","imageUrl","height","width","userId","title","createdAt","toDate","toDateString","description","likes"],"mappings":"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","sourcesContent":["import {collectionGroup, onSnapshot, query} from \"firebase/firestore\";\nimport React, {useEffect, useState} from \"react\";\nimport {auth, db} from \"../firebaseConfig\";\nimport DeleteArticle from \"./DeleteArticle\";\nimport LikeArticle from \"./LikeArticle\";\nimport Comment from \"./Comment\";\n\n\nexport default function Articles() {\n    const [articles, setArticles] = useState([]);\n    const [user, setUser] = useState('');\n\n\n    // Xử lý quá trình load user và bài post\n    useEffect(async () => {\n        auth.onAuthStateChanged((user) => setUser(user.uid))\n        const articleRef = query(collectionGroup(db, \"userPost\"))\n        const unsub = onSnapshot(articleRef, async (snapshot) => {\n            const articles = snapshot.docs.map((doc) => ({\n                uid: doc.ref.parent.parent.id,\n                id: doc.id,\n                ...doc.data()\n            }));\n            const arrPosts = await Promise.all(\n                articles.map(async (post) => {\n                    const uPost = {\n                        ...post,\n                        name: (await db.doc(`users/${post.uid}`).get()).data().name\n                    }\n                    return uPost\n                }))\n            setArticles(arrPosts);\n        });\n        return unsub\n    }, []);\n\n    // console.log(\"check articlee\", articles)\n\n    return (\n        <div>\n            {articles.length === 0 ? (\n                <p>No articles found!</p>\n            ) : (\n                articles.map((item) => {\n                    {\n                        console.log('Check item', item)\n                    }\n                    return (\n\n                        <div className=\"border mt-3 p-3 bg-light\" key={item.id}>\n                            <div className=\"row\">\n                                <div className=\"col-3\">\n                                    <img\n                                        src={item.imageUrl}\n                                        alt=\"title\"\n                                        style={{height: 180, width: 200}}\n                                    />\n                                </div>\n                                <div className=\"col-9 ps-3\">\n                                    <div className=\"row\">\n                                        <div className=\"col-6\">\n                                            {item.name && (\n                                                <span className=\"badge bg-primary\">{item.name}</span>\n                                            )}\n                                        </div>\n                                        <div className=\"col-6 d-flex flex-row-reverse\">\n                                            {user && user.uid === item.userId && (\n                                                <DeleteArticle id={item.id} imageUrl={item.imageUrl}/>\n                                            )}\n                                        </div>\n                                    </div>\n                                    <h3>{item.title}</h3>\n                                    <p>{item.createdAt.toDate().toDateString()}</p>\n                                    <h5>{item.description}</h5>\n                                    <hr/>\n                                    <div>\n                                        Comment\n                                        <div>\n                                            <Comment idPost={item.id} user={user}/>\n                                        </div>\n                                    </div>\n                                    <div className=\"d-flex flex-row-reverse\">\n                                        {user && <LikeArticle id={item.id} likes={item.likes}/>}\n                                        <div className=\"pe-2\">\n                                            <p>{item.likes?.length} likes</p>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    )\n                })\n            )}\n        </div>\n    );\n}\n"]},"metadata":{},"sourceType":"module"}